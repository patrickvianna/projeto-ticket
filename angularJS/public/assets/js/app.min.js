"use strict";angular.module("myApp",["ngAnimate","ui.router","toastr"]);
"use strict";angular.module("myApp").constant("consts",{appName:"Projeto ticket",version:"1.0",owner:"Patrick",year:"2018",site:"",apiUrl:"http://localhost:3003/api",oapiUrl:"http://localhost:3003/oapi",userKey:"_my_app_user"}).run(["$rootScope","consts",function(t,o){t.consts=o}]);
"use strict";angular.module("myApp").config(["$stateProvider","$urlRouterProvider","$httpProvider",function(t,e,i){t.state("ticketList",{url:"/ticketList",templateUrl:"template/ticket.list.html"}).state("newTicket",{url:"/newTicket",templateUrl:"template/ticket.new.html"}).state("login",{url:"/login",templateUrl:"template/login.html"}).state("ticketDetalhe",{url:"/detalhe-ticket/:idTicketRota",templateUrl:"template/ticket.detail.html"}),i.interceptors.push("handleResponseError")}]).run(["$rootScope","$http","$location","$window","auth",function(t,e,i,l,o){a(),t.$on("$locationChangeStart",function(){return a()});function a(){var t=o.getUser(),a=l.location.href.includes("/auth.html");t||a?t&&!t.isValid&&o.validateToken(t.token,function(o,n){n?(t.isValid=!0,e.defaults.headers.common.Authorization=t.token,a?l.location.href="/":i.path("/ticketList")):l.location.href="/auth.html"}):l.location.href="/auth.html"}}]);
"use strict";angular.module("myApp").directive("uiAccordion",function(){return{templateUrl:"template/accordionVm.html",scope:{ticketObject:"="},require:"^uiAccordions",link:function(e,i,c,n){n.registerAccordion(e),e.open=function(){n.closeAll(),e.isOpened=!e.isOpened}}}});
"use strict";!function(){angular.module("myApp").controller("LoginCtrl",["$http","Msg","Url","auth","$location",function(t,o,n,e,r){var u=this;u.loginMode=!0,u.user={login:"teste",senha:"123456789"},u.logar=function(){e.login(u.user,function(t){t?o.addError(t.data):(r.path("/ticketList"),o.addSucess("Bem-vindo","Logado com sucesso!"))})},u.logout=function(){e.logout(function(){return r.path("/")})},u.getUser=function(){return e.getUser()}}])}();
"use strict";!function(){angular.module("myApp").controller("NewTicket",["$scope","$http","Ticket","consts","Msg","$state",function(e,o,t,i,a,d){var r=this;r.severidade={idSeveridade:null,availableOptions:[{model:1,severidade:"Baixa"},{model:2,severidade:"Normal"},{model:3,severidade:"Alta"},{model:4,severidade:"Urgente"},{model:5,severidade:"Imediata"}]},r.tipo={idTipo:null,availableOptions:[{model:1,tipo:"Bug"},{model:2,tipo:"Funcionalidade"},{model:3,tipo:"Suporte"}]},r.projeto={idProjeto:null,availableOptions:[{model:1,projeto:"Teste"}]},r.tarefa={idUser:"",titulo:"",descricao:"",tipo:"",severidade:"",projeto:""},r.setTickets=function(){r.tarefa.tipo=r.tipo.idTipo,r.tarefa.severidade=r.severidade.idSeveridade,r.tarefa.projeto=r.projeto.idProjeto,r.tarefa.idUser=JSON.parse(localStorage.getItem(i.userKey)).id,o.post(i.apiUrl+"/setTickets",r.tarefa).then(function(e){console.log(e),d.go("ticketList"),a.addSucess("Criado com sucesso")}).catch(function(e){console.log(e),a.addError("Ops, houve algo de errado")})}}])}();
"use strict";!function(){angular.module("myApp").controller("TicketCtrl",["$scope","$http","$location","consts","$state",function(t,e,c,a,i){var o=this;o.tickets={tarefas:""};o.verTicket=function(t){i.go("ticketDetalhe",{idTicketRota:t})},e.post(a.apiUrl+"/getTickets",JSON.parse(localStorage.getItem(a.userKey))).then(function(t){o.tickets.tarefas=t.data}).catch(function(t){})}])}();
"use strict";!function(){angular.module("myApp").controller("DetailCtrl",["$http","$stateParams","consts",function(t,o,e){var a=this,n=o.idTicketRota;a.tarefa={},a.coment="",a.comentsLs=[];new Date;a.addComent=function(){console.log("ENTREI NO COMENTARIO");var t={descricao:a.coment,dateCreate:"12/01/2018 16:27"};a.comentsLs.push(t),a.coment="",console.log(a.comentsLs)},t.post(e.apiUrl+"/getDetail",{rota:n}).then(function(t){a.tarefa=t.data.issue,console.log(a.tarefa)}).catch(function(t){console.log(t)})}])}();
"use strict";!function(){angular.module("myApp").factory("auth",["$http","consts",function(t,n){var o=null;function e(){return o||(o=JSON.parse(localStorage.getItem(n.userKey))),o}function a(o,e,a){t.post(n.oapiUrl+"/"+o,e).then(function(o){localStorage.setItem(n.userKey,JSON.stringify(o.data)),t.defaults.headers.common.Authorization=o.data.token,a&&a(null,o.data)}).catch(function(t){a&&(console.log(t),a(t,null))})}function u(e){o=null,localStorage.removeItem(n.userKey),t.defaults.headers.common.Authorization="",e&&e(null)}return{signup:function(t,n){a("signup",t,n)},login:function(t,n){a("login",t,n)},logout:u,getUser:e,validateToken:function(o,a){o?t.post(n.oapiUrl+"/validateToken",{token:o}).then(function(n){n.data.valid?t.defaults.headers.common.Authorization=e().token:u(),a&&a(null,n.data.valid)}).catch(function(t){a&&a(t.data.errors)}):a&&a("Token invÃ¡lido.")}}}])}();
"use strict";angular.module("myApp").factory("gridSystem",[function(){return{toCssClasses:function(s){var t=s?s.split(" "):[],o="";return t[0]&&(o+="col-xs-offset-"+t[0]),t[1]&&(o+="col-xs-"+t[1]),t[2]&&(o+="col-md-offset-"+t[2]),t[3]&&(o+="col-md-"+t[3]),o}}}]);
"use strict";!function(){angular.module("myApp").factory("handleResponseError",["$q","$window","consts",function(r,e,o){return{responseError:function(n){403===n.status&&(localStorage.removeItem(o.userKey),e.location.href="/");return r.reject(n)}}}])}();
"use strict";!function(){angular.module("myApp").factory("Msg",["toastr",function(r){function n(n,o,t){n instanceof Array?n.forEach(function(n){return r[t](n,o)}):r[t](n,o)}return{addSucess:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Sucesso";n(r,o,"success")},addError:function(r){n(r,"Erro","error")}}}])}();
"use strict";angular.module("myApp").factory("Ticket",function(){return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.numRegistro=t,this.titulo=i,this.dtCriacao=n,this.status=u}});
"use strict";angular.module("myApp").factory("Url",function(){return{userAll:function(){return"http://redmine:81/redmine/users.json?key=683ad157ea69a8e9d8b5db20782b92fd1267e238"},projectAll:function(){return"http://redmine:81/redmine/projects.json?key=683ad157ea69a8e9d8b5db20782b92fd1267e238"},usersProject:function(e){return"http://redmine:81/redmine/projects/"+e+"/memberships.json?key=683ad157ea69a8e9d8b5db20782b92fd1267e238"},validarUsuario:function(e){return"http://redmine:81/redmine/users.json?key=683ad157ea69a8e9d8b5db20782b92fd1267e238&name="+e}}});
"use strict";angular.module("myApp").factory("User",function(){return function(t,i,s,n,a,e,h){this.id=t,this.created_on=i,this.name=s,this.fistname=n,this.lastname=a,this.login=e,this.mail=h}});