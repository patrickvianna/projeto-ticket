"use strict";angular.module("myApp",["ngAnimate","ui.router","toastr"]);
"use strict";angular.module("myApp").constant("consts",{appName:"Projeto ticket",version:"1.0",owner:"Patrick",year:"2018",site:"",apiUrl:"http://localhost:3003/api",oapiUrl:"http://localhost:3003/oapi",userKey:"_my_app_user"}).run(["$rootScope","consts",function(t,o){t.consts=o}]);
"use strict";angular.module("myApp").config(["$stateProvider","$urlRouterProvider","$httpProvider",function(t,e,o){t.state("ticketList",{url:"/ticketList",templateUrl:"template/ticket.list.html"}).state("newTicket",{url:"/newTicket",templateUrl:"template/ticket.new.html"}).state("login",{url:"/login",templateUrl:"template/login.html"}),o.interceptors.push("handleResponseError")}]).run(["$rootScope","$http","$location","$window","auth",function(t,e,o,i,n){l(),t.$on("$locationChangeStart",function(){return l()});function l(){var t=n.getUser(),l=i.location.href.includes("/auth.html");t||l?t&&!t.isValid&&n.validateToken(t.token,function(n,a){a?(t.isValid=!0,e.defaults.headers.common.Authorization=t.token,l?i.location.href="/":o.path("/ticketList")):i.location.href="/auth.html"}):i.location.href="/auth.html"}}]);
"use strict";!function(){angular.module("myApp").controller("LoginCtrl",["$http","Msg","Url","auth","$location",function(t,o,n,r,u){var e=this;e.loginMode=!0,e.user={login:"teste",senha:"123456789"},e.logar=function(){r.login(e.user,function(t){t?o.addError(t.data):(o.addSucess("Logado com sucesso!"),u.path("/ticketList"))})},e.logout=function(){r.logout(function(){return u.path("/")})},e.getUser=function(){return r.getUser()}}])}();
"use strict";!function(){angular.module("myApp").controller("NewTicket",["$scope","$http","Ticket","consts",function(t,e,c,o){this.ticket,this.setTickets=function(){e.post(o.apiUrl+"/setTickets",JSON.parse(localStorage.getItem(o.userKey))).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},this.setTickets()}])}();
"use strict";!function(){angular.module("myApp").controller("TicketCtrl",["$scope","$http","Ticket","consts",function(t,e,c,o){var n=this;e.post(o.apiUrl+"/getTickets",JSON.parse(localStorage.getItem(o.userKey))).then(function(t){n.tickets=t.data,console.log(n.tickets)}).catch(function(t){console.log(t)})}])}();
"use strict";!function(){angular.module("myApp").factory("auth",["$http","consts",function(t,n){var o=null;function e(){return o||(o=JSON.parse(localStorage.getItem(n.userKey))),o}function a(o,e,a){t.post(n.oapiUrl+"/"+o,e).then(function(o){localStorage.setItem(n.userKey,JSON.stringify(o.data)),t.defaults.headers.common.Authorization=o.data.token,a&&a(null,o.data)}).catch(function(t){a&&(console.log(t),a(t,null))})}function u(e){o=null,localStorage.removeItem(n.userKey),t.defaults.headers.common.Authorization="",e&&e(null)}return{signup:function(t,n){a("signup",t,n)},login:function(t,n){a("login",t,n)},logout:u,getUser:e,validateToken:function(o,a){o?t.post(n.oapiUrl+"/validateToken",{token:o}).then(function(n){n.data.valid?t.defaults.headers.common.Authorization=e().token:u(),a&&a(null,n.data.valid)}).catch(function(t){a&&a(t.data.errors)}):a&&a("Token invÃ¡lido.")}}}])}();
"use strict";angular.module("myApp").factory("gridSystem",[function(){return{toCssClasses:function(s){var t=s?s.split(" "):[],l="";return t[0]&&(l+="col-xs-"+t[0]),t[1]&&(l+="col-sm-"+t[1]),t[2]&&(l+="col-md-"+t[2]),t[3]&&(l+="col-lg-"+t[3]),l}}}]);
"use strict";!function(){angular.module("myApp").factory("handleResponseError",["$q","$window","consts",function(r,e,o){return{responseError:function(n){403===n.status&&(localStorage.removeItem(o.userKey),e.location.href="/");return r.reject(n)}}}])}();
"use strict";!function(){angular.module("myApp").factory("Msg",["toastr",function(r){function n(n,o,c){n instanceof Array?n.forEach(function(n){return r[c](n,o)}):r[c](n,o)}return{addSucess:function(r){n(r,"Sucesso","success")},addError:function(r){n(r,"Erro","error")}}}])}();
"use strict";angular.module("myApp").factory("Ticket",function(){return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.numRegistro=t,this.titulo=i,this.dtCriacao=n,this.status=u}});
"use strict";angular.module("myApp").factory("Url",function(){return{userAll:function(){return"http://redmine:81/redmine/users.json?key=683ad157ea69a8e9d8b5db20782b92fd1267e238"},projectAll:function(){return"http://redmine:81/redmine/projects.json?key=683ad157ea69a8e9d8b5db20782b92fd1267e238"},usersProject:function(e){return"http://redmine:81/redmine/projects/"+e+"/memberships.json?key=683ad157ea69a8e9d8b5db20782b92fd1267e238"},validarUsuario:function(e){return"http://redmine:81/redmine/users.json?key=683ad157ea69a8e9d8b5db20782b92fd1267e238&name="+e}}});
"use strict";angular.module("myApp").factory("User",function(){return function(t,i,s,n,a,e,h){this.id=t,this.created_on=i,this.name=s,this.fistname=n,this.lastname=a,this.login=e,this.mail=h}});